<!DOCTYPE html>
<html>
<head>
<meta charset='UTF-8'>
<title>학생관리-상세</title>
<style type="text/css">
body{
  font-family: '맑은 고딕', sans-serif;
}
#sidebar {
  color: white;
  padding: 10px 5px;
  float: left;
  margin: 5px 5px 5px 0px;
  font-weight: bold;
}

#sidebar a {
  color: white;
  text-decoration: none;
}

#content {
  margin-left: 200px;
}

#footer {
  clear: left;
}

</style>
</head>
<body>

<div id='header' style='background-color: gray; height: 60px; position:relative;'></div>

<div id='sidebar' style='background-color: orange; width: 180px; height: 400px;'>

</div><div id="content"> 
<h1>학생 정보</h1>
<form action='update.do' method='POST' enctype='multipart/form-data'>
<table border='1'>
<tr><th>이메일</th><td><input id='email' type='text'></td></tr>
<tr><th>암호</th><td><input id='password' type='password'></td></tr>
<tr><th>이름</th><td><input id='name' type='text'></td></tr>
<tr><th>전화</th><td><input id='tel' type='text'></td></tr>
<tr><th>재직여부</th><td>
  <input type='radio' id='working' value='true'>재직중
  <input type='radio' id='not-working' value='false'>실업/미취업</td></tr>
<tr><th>최종학력</th><td>
<select id='grade'>
  <option value='고졸'>고졸</option>
  <option value='전문학사'>전문학사</option>
  <option value='학사'>학사</option>
  <option value='석사'>석사</option>
  <option value='박사'>박사</option>
</select>
</td></tr>
<tr><th>학교명</th><td><input id='school-name' type='text'></td></tr>
<tr><th>사진</th><td><img id='photo-img' height='80'>
  <input id='photo' type='file'></td></tr>
</table>
<button id='updBtn' type='button'>변경</button>
<button id='delBtn' type='button'>삭제</button>
<button id='listBtn' type='button'>목록</button>
</form>
</div>

<div id='footer' style='background-color: gray; height: 30px; margin-top: 20px;'></div>

<script src="../js/bit.js"></script>
<script src="../js/common.js"></script>
<script>
var memberNo = location.href.split('?')[1].split('=')[1];
// header.html을 가져와서 붙인다.
get('../header.html', function(result) {
	document.querySelector('#header').innerHTML = result;
});

// sidebar.html을 가져와서 붙인다.
get('../sidebar.html', function(result) {
  document.querySelector('#sidebar').innerHTML = result;
});

// 학생 목록 가져와서 tr 태그를 만들어 붙인다.
get('detail.json?memberNo=' + memberNo, function(jsonText) {
  // result JSON 문자열을 자바스크립트 객체로 만든다.
  var resultResult = JSON.parse(jsonText).ajaxResult;
  var status = resultResult.status;
  
  if (status != "success") {
	  alert(resultResult.data);
	  return;
  }
  
  var student = resultResult.data;
  console.log(student);
  document.querySelector('#email').value = student.email;
  document.querySelector('#name').value = student.name;
  document.querySelector('#tel').value = student.tel;
  if (student.working == true) {
    document.querySelector('#working').checked = 'checked';
  } else {
    document.querySelector('#not-working').checked = 'checked';
  }
  document.querySelector('#grade').value = student.grade;
  document.querySelector('#school-name').value = student.schoolName;
  document.querySelector('#photo').src = "../upload/" + student.photoPath;
});


</script>

</body>
</html>
